<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Emotion Recognition - Standalone</title>
    <meta name="description" content="Advanced AI-powered facial emotion recognition - 100% offline">
    
    <!-- PWA Meta -->
    <meta name="theme-color" content="#6366f1">
    <link rel="manifest" href="manifest.json">
    
    <!-- Local Styles -->
    <style>
        /* Inline all CSS for complete offline capability */
        :root {
            --primary-color: #6366f1;
            --secondary-color: #8b5cf6;
            --background: #ffffff;
            --surface: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
        }

        [data-theme="dark"] {
            --background: #0f172a;
            --surface: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #334155;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: var(--surface);
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .camera-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .camera-container {
            position: relative;
            background: var(--surface);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        #video {
            width: 100%;
            height: auto;
            display: block;
        }

        #overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-secondary {
            background: var(--surface);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .emotion-display {
            background: var(--surface);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .emotion-card {
            text-align: center;
            margin-bottom: 20px;
        }

        .emotion-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .emotion-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .emotion-confidence {
            font-size: 18px;
            color: var(--text-secondary);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary-color);
            transition: width 0.3s ease;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: var(--surface);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .upload-section {
            background: var(--surface);
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        .upload-zone {
            border: 2px dashed var(--border);
            border-radius: 12px;
            padding: 40px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-zone:hover {
            border-color: var(--primary-color);
            background: rgba(99, 102, 241, 0.05);
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .camera-section {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
        }

        /* Loading states */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .offline-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            background: var(--success);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            z-index: 10000;
        }
    </style>
</head>
<body>
    <div class="offline-indicator">ðŸ“± 100% Offline Mode</div>
    
    <div class="container">
        <header class="header">
            <h1>ðŸ§  AI Emotion Recognition</h1>
            <p>Advanced facial emotion detection - completely offline, no server required</p>
        </header>

        <div class="camera-section">
            <div class="camera-container">
                <video id="video" autoplay muted playsinline></video>
                <canvas id="overlay"></canvas>
            </div>

            <div class="emotion-display">
                <div class="emotion-card">
                    <div class="emotion-icon" id="emotionIcon">ðŸ˜Š</div>
                    <div class="emotion-name" id="emotionName">Ready</div>
                    <div class="emotion-confidence" id="emotionConfidence">0%</div>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="emotionProgress" style="width: 0%"></div>
                </div>
                
                <p id="emotionDescription">Position your face in the camera frame</p>
            </div>
        </div>

        <div class="controls">
            <button class<thinking>
From the service worker (sw.js), I see the app caches local files but still depends on external CDN resources for face-api.js, Chart.js, Google Fonts, and Font Awesome. This means offline usage is limited unless these external resources are also cached or bundled locally.

From package.json, this is a backend API project using Node.js and Express, so the current app requires a server for backend API and database integration.

From js/app.js, the app loads face-api.js models from CDN or local models folder. It tries CDN first, then local fallback. The app uses browser APIs like getUserMedia for camera access, so it must run in a browser environment.

Summary:
- The app is a web app that requires a browser to run.
- It depends on backend APIs (server.js) for some functionality.
- It uses external CDN resources that limit offline/standalone usage.
- It has a service worker but does not cache all external dependencies locally.
- The user wants to run the app on all devices without installing a server or opening a browser.

Options to fulfill the user request:
1. Convert the app into a fully offline-capable PWA by:
   - Downloading and bundling all external dependencies locally.
   - Updating service worker to cache all assets including local dependencies.
   - Ensuring all backend API calls are either removed or replaced with local logic (if possible).
   - This still requires a browser but can be installed and run offline on devices supporting PWA.

2. Package the app as a desktop app using Electron or similar:
   - This bundles Chromium browser and Node.js runtime.
   - No need to install a separate server or open a browser manually.
   - The app runs as a standalone executable on devices.
   - This requires creating an Electron wrapper and adapting the app accordingly.

3. Convert the app to a native mobile app using frameworks like React Native or Flutter:
   - This is a bigger effort and likely out of scope.

Given the current project structure and user request, the best approach is to create an Electron app wrapper for the existing web app. This will allow running the app on all devices (Windows, Mac, Linux) without installing a server or opening a browser manually.

Plan:
- Create an Electron main process file (main.js) to load the existing index.html.
- Add Electron dependencies to package.json.
- Adjust app to load local dependencies only.
- Bundle external dependencies locally.
- Update service worker to cache all assets.
- Provide instructions to run the Electron app.

Next step:
- Check if Electron is already in package.json (it is not).
- Check if local copies of external dependencies exist (likely not).
- I will read the js/emotion-engine.js to check for other dependencies.
- Then I will propose the detailed plan for creating the Electron app and bundling dependencies.

Proceeding to read js/emotion-engine.js.
</thinking>

<read_file>
<path>facial-emotion-recognition/js/emotion-engine.js</path>
</read_file>
